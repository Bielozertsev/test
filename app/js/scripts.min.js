$(document).ready(function(){var t=0,c="test123@gmail.com",m=function(t,e){var s=new Date(t.created_at),n=s.getHours()+":"+s.getMinutes(),o=(s.getDate()<10?"0":"")+s.getDate()+"-"+(s.getMonth()+1<10?"0":"")+(s.getMonth()+1)+"-"+s.getFullYear(),a=1!==t.author.id?"hidden":"";return'               <div class="comments-wrap js-commentsWrap" data-id="'+t.id+'">                   <div class="comments-wrap-inner js-commentsWrapInner">             <div class="comments-avatar">                   <div class="comments-avatar-inner" style="background-image: url('+t.author.avatar+')">                   </div>               </div>                       <div class="comments-content-item">                   <author class="comments-content-author">'+t.author.name+'</author>                           <span class="comments-content-parent">'+e+'</span>                      <time class="comments-content-date">                       <span class="comments-content-date-val">'+o+'</span>                        <span class="comments-content-date-devider">at</span>                        <span class="comments-content-time-val">'+n+'</span>                    </time>                   <div class="comments-content-text js-commentsContentText">'+t.content+'</div>                   <ul class="comments-content-actions-list">                       <li class="comments-content-actions-item comments-content-actions-edit '+a+'">                           <button class="js-edit">Edit</button>                       </li>                       <li class="comments-content-actions-item comments-content-actions-delete '+a+'">                           <button class="js-delete">Delete</button>                       </li>                   </ul>               <form class="comments-form js-commentsForm">                   <div class="comments-form-item">                       <textarea class="comments-textarea js-textarea"  placeholder="Your Message">                       </textarea>                   </div>                   <div class="comments-form-item">                       <input class="comments-submit btn js-submit" type="submit" value="Send">                   </div>               </form>               </div>                   </div>               </div>'},l=function(t,e){var s=new Date(t.created_at),n=s.getHours()+":"+s.getMinutes(),o=(s.getDate()<10?"0":"")+s.getDate()+"-"+(s.getMonth()+1<10?"0":"")+(s.getMonth()+1)+"-"+s.getFullYear(),a=1!==t.author.id?"hidden":"",c=e||"";return'<div class="comments-wrap js-commentsWrap js-commentsWrapParent" data-id="'+t.id+'">           <div class="comments-wrap-inner js-commentsWrapInner">               <div class="comments-avatar">                   <div class="comments-avatar-inner" style="background-image: url('+t.author.avatar+')">                   </div>               </div>               <div class="comments-content-item">                   <author class="comments-content-author js-commentsContentAuthor">'+t.author.name+'</author>                   <time class="comments-content-date">                       <span class="comments-content-date-val">'+o+'</span>                        <span class="comments-content-date-devider">at</span>                        <span class="comments-content-time-val">'+n+'</span>                    </time>                   <div class="comments-content-text js-commentsContentText">'+t.content+'</div>                   <ul class="comments-content-actions-list">                       <li class="comments-content-actions-item comments-content-actions-edit '+a+'">                           <button class="js-edit">Edit</button>                       </li>                       <li class="comments-content-actions-item comments-content-actions-delete '+a+'">                           <button class="js-delete">Delete</button>                       </li>                       <li class="comments-content-actions-item comments-content-actions-reply">                           <button class="js-reply">Reply</button>                       </li>                   </ul>               <form class="comments-form js-commentsForm">                   <div class="comments-reply-items clearfix">                       <span class="comments-reply-author js-commentsReplyAuthor"></span>                          <button class="comments-reply-close js-commentsReplyClose">Cancel</button>                    </div>                    <div class="comments-form-item">                       <textarea class="comments-textarea js-textarea" placeholder="Your Message">                       </textarea>                   </div>                   <div class="comments-form-item">                       <input class="comments-submit btn js-submit" type="submit" value="Send">                   </div>               </form>               </div>               <div class="comments-replied-list js-repliedList">'+c+"               </div>             </div>"},e=function(t){$.ajax({url:"http://frontend-test.pingbull.com/pages/"+c+"/comments",type:"POST",dateType:"json",data:{_method:"GET",count:5,offset:t},success:function(t){$.each(t,function(t,e){var s=[];for(i=0;i<e.children.length;i++)s.push(m(e.children[i],e.author.name));$(".js-commentsList").append(l(e,s.join(""))),1==e.author.id&&$(".js-userAvatar").css("background-image",'url("'+e.author.avatar+'")')})}})};e(t),$(document).on("click",".js-edit",function(){var t=$(this).closest(".js-commentsWrap"),e=t.find(".js-commentsContentText").eq(0).text();t.find(".js-textarea").eq(0).val(e),t.find(".js-commentsForm").eq(0).show().addClass("editing").removeClass("newMessage"),t.find(".js-commentsReplyAuthor").hide()}),$(document).on("click",".editing .js-submit",function(t){t.preventDefault();var e=$(this).closest(".js-commentsWrap"),s=e.find(".js-textarea").eq(0).val(),n=e.data("id");e.find(".js-commentsForm.editing")&&$.ajax({url:"http://frontend-test.pingbull.com/pages/"+c+"/comments/"+n,type:"POST",dateType:"json",data:{_method:"PUT",content:s},success:function(){e.find(".js-commentsContentText").eq(0).text(s),e.find(".js-commentsForm").eq(0).hide().toggleClass("editing")}})}),$(document).on("click",".js-reply",function(){var t=$(this).closest(".js-commentsWrap"),e=t.find(".js-commentsContentAuthor").text();t.find(".js-commentsForm").eq(0).show().addClass("newMessage").removeClass("editing"),t.find(".js-commentsReplyAuthor").show().text(e),t.find(".js-textarea").val("")}),$(document).on("click",".newMessage .js-submit",function(t){t.preventDefault();var e=$(this).closest(".js-commentsWrap"),s=e.find(".js-textarea").eq(0),n=e.data("id")?e.data("id"):"",o=$(this).closest(".js-commentsWrapParent").find(".js-repliedList"),a=e.find(".js-commentsContentAuthor").text();$.ajax({url:"http://frontend-test.pingbull.com/pages/"+c+"/comments",type:"POST",dateType:"json",data:{_method:"POST",content:s.val(),parent:n},success:function(t){n?o.append(m(t,a)):$(".js-commentsList").prepend(l(t)),s.val(""),e.not(".js-commentsWrapDefault").find(".js-commentsForm").eq(0).hide()}})}),$(document).on("click",".js-commentsLoadBtn",function(){e(t+=5)}),$(document).on("click",".js-delete",function(){var t=$(this).closest(".js-commentsWrap"),e=t.data("id");$.ajax({url:"http://frontend-test.pingbull.com/pages/"+c+"/comments/"+e,type:"POST",dateType:"json",data:{_method:"DELETE"},success:function(){t.remove()}})}),$(document).on("click",".js-commentsReplyClose",function(t){t.preventDefault(),$(this).closest(".js-commentsForm").hide()})});